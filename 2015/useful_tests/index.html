<!DOCTYPE html>
<html>
  <head>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-28637942-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-28637942-1');
  </script>
  
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>Writing valuable automated tests</title>
  <meta name="description" content="When I started working for myself on dotdev I spent quite a bit of time thinking about testing, and test automation as it's likely the only barrier between me missing something (which humans do) and that bug going live and annoying people. So I designed my test strategy around taking me missing things out of the picture (ie automation). Below are some of my thoughts around good and bad tests and how to get the best bang for your time when building automated tests.">
  <meta name="author" content="Luke McGregor">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Writing valuable automated tests">
  <meta name="twitter:description" content="When I started working for myself on dotdev I spent quite a bit of time thinking about testing, and test automation as it's likely the only barrier between me missing something (which humans do) and that bug going live and annoying people. So I designed my test strategy around taking me missing things out of the picture (ie automation). Below are some of my thoughts around good and bad tests and how to get the best bang for your time when building automated tests.">
  
  <meta name="twitter:creator" content="staticv0id">
  
  <meta name="twitter:image" content="/images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="Writing valuable automated tests">
  <meta property="og:description" content="When I started working for myself on dotdev I spent quite a bit of time thinking about testing, and test automation as it's likely the only barrier between me missing something (which humans do) and that bug going live and annoying people. So I designed my test strategy around taking me missing things out of the picture (ie automation). Below are some of my thoughts around good and bad tests and how to get the best bang for your time when building automated tests.">
  <meta property="og:image" content="/images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/css/main.css?1533546547300072615">
  <link rel="canonical" href="http://blog.staticvoid.co.nz/2015/useful_tests/">
  <link rel="alternate" type="application/rss+xml" title="StaticVoid" href="/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
	<div class="panel-main">

		<div class="panel-main__inner panel-inverted">
			<div class="panel-main__content">
				<a href="/" title="link to home of StaticVoid">
					<img src="https://www.gravatar.com/avatar/46e93e55b8f4f652201516c2f7bf3323?s=256" class="user-image" alt="Profile Photo">
					<div class="staticvoid-logo">
						<div class="wrapper">
							<div class="code">static void;</div>
							<div class="comment">// Blog</div>
						</div>
					</div>
				</a>
				<hr class="panel-cover__divider">

				<div class="navigation-wrapper">

					<nav class="cover-navigation cover-navigation--primary">
						<ul class="navigation">							
							<li class="navigation__item"><a href="/" title="Tech">Tech</a></li>
							<li class="navigation__item"><a href="/personal" title="Personal">Personal</a></li>
						</ul>
					</nav>

					<nav class="cover-navigation navigation--social">
						<ul class="navigation">

							
							<!-- Twitter -->
							<li class="navigation__item">
								<a href="http://twitter.com/staticv0id" title="@staticv0id on Twitter" target="_blank">
									<i class="icon icon-social-twitter"></i>
									<span class="label">Twitter</span>
								</a>
							</li>
							   
							<!-- GitHub -->
							<li class="navigation__item">
								<a href="https://www.github.com/lukemcgregor" title="lukemcgregor on GitHub" target="_blank">
									<i class="icon icon-social-github"></i>
									<span class="label">GitHub</span>
								</a>
							</li>
							 

							<!-- RSS -->
							<li class="navigation__item">
								<a href="/feed.xml" title="Subscribe" target="_blank">
									<i class="icon icon-rss"></i>
									<span class="label">RSS</span>
								</a>
							</li>

						</ul>
					</nav>

				</div>

			</div>

		</div>

		<div class="panel-cover--overlay"></div>
	</div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="28 May 2015" class="post-meta__date date">28 May 2015</time>
      
    </div>
    <h1 class="post-title">Writing valuable automated tests</h1>
  </header>

  <section class="post">
    <p>When I started working for myself on <a href="https://dotdev.io">dotdev</a> I spent quite a bit of time thinking about testing, and test automation as it’s likely the only barrier between me missing something (which humans do) and that bug going live and annoying people. So I designed my test strategy around taking me missing things out of the picture (ie automation). Below are some of my thoughts around good and bad tests and how to get the best bang for your time when building automated tests.</p>

<p>Over the years I have worked on a bunch of projects having all kinds of test strategies, from no tests to manual tests mountains of automated tests. I have come to the conclusion that good testing is a bit of an art and (like most things) there is certainly no check list you can follow to the ideal tests. So instead I’m going to talk about some principals which have helped me.</p>

<h3 id="be-deliberate-about-why-you-are-testing">Be deliberate about <em>why</em> you are testing</h3>

<p>Don’t just test because it’s a good thing to do, test to avoid some specific things. This will make your tests more valuable and potent.</p>

<p>For dotdev I have the following goals (in order):</p>

<ol>
  <li>The URL http://dotdev.io always returns a successful status code</li>
  <li>Never have a whole site outage as a result of a deploy</li>
  <li>Scenarios are always viewable</li>
  <li>You can login</li>
  <li>Proposing a scenario always works</li>
  <li>Suggesting a tool always works</li>
  <li>Comments, pros and cons and votes are all usable</li>
  <li>noscript users get fully rendered pages (for SEO)</li>
</ol>

<p>If I introduce bugs to do with any of these it will have a major frustration impact, so this is what I want to prove works when running my tests.</p>

<h3 id="prove-the-important-things">Prove the important things</h3>

<p>If you are expecting your automated tests to catch everything, you’re in for some disappointment (no matter how many tests you write).</p>

<p>It’s far better to prove that some important use cases are still achievable. This wont make you bug free <a href="http://en.wikipedia.org/wiki/Pareto_principle">but hardly anyone will notice them</a>.</p>

<p><img src="http://i.stack.imgur.com/ifOwg.gif" alt="difficult" /></p>

<h3 id="common-usage-scenarios-over-edge-cases">Common usage scenarios over edge cases</h3>

<p>Edge case testing can be important but it’s not as important to automate. You are much more likely to stop a major issue by testing common scenarios than edge cases. Edge case bugs are likely to affect fewer users.</p>

<h3 id="automated-tests-are-mostly-cheaper-than-manual">Automated tests are (mostly) cheaper than manual</h3>

<p>As with most things if you have to do something more than a few times you will save time by automating it.</p>

<h3 id="delete-bad-or-unimportant-tests">Delete bad or unimportant tests</h3>

<p>If it isn’t helping it’s hurting. Get rid of it.</p>

<h3 id="dont-test-your-add-function">Don’t test your add function</h3>

<p>The classic unit test example is testing an add function. It’s a good example of how tests work but in reality testing things that are too simple doesn’t prove anything important. If it’s easier to look at the code and tell at a glance if it’s wrong eg <code title="ahh&nbsp;good&nbsp;you&nbsp;spotted&nbsp;it">add(a,b){ return a * b; }</code> this isn’t worth your while testing (or writing).</p>

<h3 id="each-test-is-expensive-be-frugal">Each test is expensive, be frugal</h3>

<p>One of the things I have noticed, especially on larger projects is that the time spent on tests is mostly not on writing them, or even on dealing with failures, it’s on keeping them up to date. Code changes, assumptions change, and tests inevitably need updating over time. If that test is not proving something important the question needs to be asked, <em>is it worth it?</em></p>

<p>Just like with all code, write no more than you have to to prove what you need to.</p>

<h3 id="at-the-very-least-integration-test">At the very least, integration test</h3>

<p>On dotdev my most important test is a ping to my site every few minutes to make sure I don’t get an error code. This takes 2 minutes to set up (check out <a href="https://dotdev.io/scenario/61/the-best-tool-to-tell-me-when-my-website-goes-down">Dotdev: The best tool to tell me when my website goes down</a>). Every site you run should have this level of monitoring.</p>

<p>Following that my most important tests prove that the deploy I’m about to do is functional in basic usage scenarios. For this I use <a href="http://www.seleniumhq.org/">Selenium</a> and <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-staged-publishing/">Azure site swap</a> to test the running instance I’m about to swap into production.</p>

<h3 id="dont-forget-to-run-them">Don’t forget to run them</h3>

<p>No matter what kind of testing you are doing the most important thing is that you are running your tests. Build them into your CI/CD processes.</p>

<p>It’s well worth making it impossible to release your software when tests are failing.</p>

<p>If you have manual tests make sure these have been done before a deploy and there is a suitable audit trail.</p>

<h3 id="trust-your-tests">Trust your tests</h3>

<p>Whatever tests you decide to do you need to have faith in them. If you are second guessing if your application will run when someone uses it you probably need different tests.</p>

<p>If you have automated tests, ask yourself this <em>would I be prepared to release without ever looking manually at the application?</em> What about releasing every build which passes the test? If not, what scares you? Put the scary things on your test goals.</p>

  </section>
  <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>

    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://blog.staticvoid.co.nz/2015/useful_tests/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '/2015/useful_tests'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//staticvoidblog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
       })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<script type="application/ld+json">
{ "@context": "http://schema.org",
 "@type": "BlogPosting",
 "headline": "Writing valuable automated tests",
 "wordcount": "846",
 "publisher": "StaticVoid",
 "mainEntityOfPage": "http://blog.staticvoid.co.nz/2015/useful_tests/",
 "publisher": {
   "@type": "Organization",
   "name": "StaticVoid",
  "logo":{
    "@type":"ImageObject",
    "url": "http://blog.staticvoid.co.nz/images/favicons/favicon-194x194.png"
  }
 },
 "datePublished": "2015-05-28 00:00:00 +0000",
 "description": "When I started working for myself on dotdev I spent quite a bit of time thinking about testing, and test automation as it's likely the only barrier between me missing something (which humans do) and that bug going live and annoying people. So I designed my test strategy around taking me missing things out of the picture (ie automation). Below are some of my thoughts around good and bad tests and how to get the best bang for your time when building automated tests.",
   "author": {
    "@type": "Person",
    "name": "Luke McGregor"
	,"image": "https://www.gravatar.com/avatar/46e93e55b8f4f652201516c2f7bf3323?s=256"
  }
 }
</script>

      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2018 Luke McGregor. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js?1533546547300072615"></script>


    </div>
  </body>
</html>